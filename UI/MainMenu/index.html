<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Menu</title>
    <script type="text/javascript" src="scripts/jquery-1.7.2.min.js"></script>
    <script src="scripts/menu.js" type="text/javascript"></script>
    <link href="styles/menu.min.css" rel="stylesheet" />
    <link href="assets/fonts/the_league_of_orbitron/Orbitron.css" rel="stylesheet" />
    <link href='http://fonts.googleapis.com/css?family=Electrolize' rel='stylesheet' type='text/css'>
</head>
<body>
    <script>
        // Initialisation Function
        //   - Loads the page's extra files and sets the header of the page.
        $(function () {
            function getUrlParameter(sParam) {
                var sPageURL = window.location.search.substring(1);
                var sURLVariables = sPageURL.split('&');
                for (var i = 0; i < sURLVariables.length; i++) {
                    var sParameterName = sURLVariables[i].split('=');
                    if (sParameterName[0] == sParam) {
                        return sParameterName[1];
                    }
                }
            }
            function loadCSSFile(filename) {
                if (typeof filename !== "string") {
                    return -1;
                }
                var fileref = "<link rel='stylesheet' type='text/css' href='" + filename + "' />";
                $("head").append(fileref);
            }
            function loadJSFile(filename) {
                if (typeof filename !== "string") {
                    return -1;
                }
                var fileref = "<script type='text/javascript' src='" + filename + "'><\/script>";
                $("head").append(fileref);
            }
            
            var pageTitle = getUrlParameter("name").replace(/%20/g, " ");
            $("#page-header").text(pageTitle);

            console.log(getUrlParameter("filesToLoad"));
            console.log(getUrlParameter("filesToLoad").replace(/%22/g, "\""));
            var filesToLoad = JSON.parse(getUrlParameter("filesToLoad").replace(/%22/g, "\""));
            console.log(filesToLoad);
            $.each(filesToLoad["CSS"], function (i, v) {
                loadCSSFile(v);
            });
            $.each(filesToLoad["JS"], function (i, v) {
                loadJSFile(v);
            });
        });
    </script>
    <img src="assets/images/logo.png" id="menu-header" />
    <div id="outer-wrapper">
        <h3 id="page-header" class="header"></h3>
        <div class="row">
            <div class="column-2">
                <ul id="options" class="scrollable-pane full-height"></ul>
            </div>
            <div id="options-extra" class="column-2">
                <div id="options-helper-wrapper">

                </div>
            </div>
        </div>
    </div>
</body>
</html>